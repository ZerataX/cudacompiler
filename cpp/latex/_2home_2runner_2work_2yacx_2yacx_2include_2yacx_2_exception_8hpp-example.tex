\hypertarget{_2home_2runner_2work_2yacx_2yacx_2include_2yacx_2_exception_8hpp-example}{}\doxysection{/home/runner/work/yacx/yacx/include/yacx/\+Exception.\+hpp}
docs/cudaexeption.\+cpp


\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <cstdio>}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <exception>}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <memory>}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <cuda.h>}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <nvrtc.h>}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <vector\_types.h>} \textcolor{comment}{// z.B. für dim3}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#include "yacx/Logger.hpp"} \textcolor{comment}{//um den logger benutzen zu können}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{namespace }yacx \{}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{namespace }detail \{}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} askTerminalSize();}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{template} <\textcolor{keyword}{class} Container>}
\DoxyCodeLine{\textcolor{keywordtype}{void} split(\textcolor{keyword}{const} std::string \&str, Container \&cont, \textcolor{keywordtype}{char} delim = \textcolor{charliteral}{' '});}
\DoxyCodeLine{}
\DoxyCodeLine{std::string descriptionFkt(\textcolor{keyword}{const} std::string \&desc);}
\DoxyCodeLine{}
\DoxyCodeLine{std::string whichError(\textcolor{keyword}{const} CUresult \&error);}
\DoxyCodeLine{}
\DoxyCodeLine{std::string whichError(\textcolor{keyword}{const} nvrtcResult \&error);}
\DoxyCodeLine{}
\DoxyCodeLine{\} \textcolor{comment}{// namespace detail}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{class }nvidiaException : \textcolor{keyword}{public} std::exception \{}
\DoxyCodeLine{ \textcolor{keyword}{protected}:}
\DoxyCodeLine{  std::string error;}
\DoxyCodeLine{}
\DoxyCodeLine{ \textcolor{keyword}{public}:}
\DoxyCodeLine{  \textcolor{keyword}{const} \textcolor{keywordtype}{char} *what() \textcolor{keyword}{const} \textcolor{keywordflow}{throw}() \{ \textcolor{keywordflow}{return} error.c\_str(); \}}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{class }nvrtcResultException : \textcolor{keyword}{public} nvidiaException \{}
\DoxyCodeLine{ \textcolor{keyword}{public}:}
\DoxyCodeLine{  nvrtcResult type;}
\DoxyCodeLine{  nvrtcResultException(nvrtcResult type, std::string error) \{}
\DoxyCodeLine{    this-\/>type = type;}
\DoxyCodeLine{    this-\/>error = error;}
\DoxyCodeLine{    Logger(loglevel::WARNING)}
\DoxyCodeLine{        << \textcolor{stringliteral}{"nvrtcResultException "} << (int)type}
\DoxyCodeLine{        << \textcolor{stringliteral}{" with description: "} << this-\/>error.c\_str() << \textcolor{stringliteral}{" created."};}
\DoxyCodeLine{  \}}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{class }CUresultException : \textcolor{keyword}{public} nvidiaException \{}
\DoxyCodeLine{ \textcolor{keyword}{public}:}
\DoxyCodeLine{  CUresult type;}
\DoxyCodeLine{  CUresultException(CUresult type, std::string error) \{}
\DoxyCodeLine{    this-\/>type = type;}
\DoxyCodeLine{    this-\/>error = error;}
\DoxyCodeLine{    Logger(loglevel::WARNING)}
\DoxyCodeLine{        << \textcolor{stringliteral}{"CUresultException "} << (int)type}
\DoxyCodeLine{        << \textcolor{stringliteral}{" with description: "} << this-\/>error.c\_str() << \textcolor{stringliteral}{" created."};}
\DoxyCodeLine{  \}}
\DoxyCodeLine{\};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#define NVRTC\_SAFE\_CALL(error)                                                 \(\backslash\)}}
\DoxyCodeLine{\textcolor{preprocessor}{  \_\_checkNvrtcResultError(error, \_\_FILE\_\_, \_\_LINE\_\_);}}
\DoxyCodeLine{\textcolor{keyword}{inline} \textcolor{keywordtype}{void} \_\_checkNvrtcResultError(\textcolor{keyword}{const} nvrtcResult error, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *file,}
\DoxyCodeLine{                                    \textcolor{keyword}{const} \textcolor{keywordtype}{int} line) \{}
\DoxyCodeLine{  \textcolor{keywordflow}{if} (NVRTC\_SUCCESS != error) \{}
\DoxyCodeLine{    \textcolor{comment}{// create string for exception}}
\DoxyCodeLine{    std::string exception =}
\DoxyCodeLine{        nvrtcGetErrorString(error); \textcolor{comment}{// method to get the error name from NVIDIA}}
\DoxyCodeLine{    exception = exception + \textcolor{stringliteral}{"\(\backslash\)n-\/>occoured in file <"} + file + \textcolor{stringliteral}{" in line "} +}
\DoxyCodeLine{                std::to\_string(line) + \textcolor{stringliteral}{"\(\backslash\)n\(\backslash\)n"};}
\DoxyCodeLine{    \textcolor{keywordflow}{throw} nvrtcResultException(error, exception);}
\DoxyCodeLine{  \}}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#define NVRTC\_SAFE\_CALL\_LOG(error, m\_log)                                      \(\backslash\)}}
\DoxyCodeLine{\textcolor{preprocessor}{  \_\_checkNvrtcResultError\_LOG(error, m\_log, \_\_FILE\_\_, \_\_LINE\_\_);}}
\DoxyCodeLine{\textcolor{keyword}{inline} \textcolor{keywordtype}{void} \_\_checkNvrtcResultError\_LOG(\textcolor{keyword}{const} nvrtcResult error,}
\DoxyCodeLine{                                        std::\_\_cxx11::basic\_string<char> m\_log,}
\DoxyCodeLine{                                        \textcolor{keyword}{const} \textcolor{keywordtype}{char} *file, \textcolor{keyword}{const} \textcolor{keywordtype}{int} line) \{}
\DoxyCodeLine{  \textcolor{keywordflow}{if} (NVRTC\_SUCCESS != error) \{}
\DoxyCodeLine{    \textcolor{comment}{// create string for exception}}
\DoxyCodeLine{    std::string exception =}
\DoxyCodeLine{        nvrtcGetErrorString(error); \textcolor{comment}{// method to get the error name from NVIDIA}}
\DoxyCodeLine{    exception = exception + \textcolor{stringliteral}{"\(\backslash\)n-\/>occoured in file <"} + file + \textcolor{stringliteral}{" in line "} +}
\DoxyCodeLine{                std::to\_string(line) + \textcolor{stringliteral}{"\(\backslash\)n m\_log: "} + m\_log + \textcolor{stringliteral}{"\(\backslash\)n\(\backslash\)n"};}
\DoxyCodeLine{    \textcolor{keywordflow}{throw} nvrtcResultException(error, exception);}
\DoxyCodeLine{  \}}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#define CUDA\_SAFE\_CALL(error)                                                  \(\backslash\)}}
\DoxyCodeLine{\textcolor{preprocessor}{  yacx::\_\_checkCUresultError(error, \_\_FILE\_\_, \_\_LINE\_\_);}}
\DoxyCodeLine{\textcolor{keyword}{inline} \textcolor{keywordtype}{void} \_\_checkCUresultError(\textcolor{keyword}{const} CUresult error, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *file,}
\DoxyCodeLine{                                 \textcolor{keyword}{const} \textcolor{keywordtype}{int} line) \{}
\DoxyCodeLine{  \textcolor{keywordflow}{if} (CUDA\_SUCCESS != error) \{}
\DoxyCodeLine{    \textcolor{comment}{// create string for exception}}
\DoxyCodeLine{    \textcolor{keyword}{const} \textcolor{keywordtype}{char} *name;}
\DoxyCodeLine{    cuGetErrorName(error, \&name); \textcolor{comment}{// method to get the error name from NVIDIA}}
\DoxyCodeLine{    \textcolor{keyword}{const} \textcolor{keywordtype}{char} *description;}
\DoxyCodeLine{    cuGetErrorString(}
\DoxyCodeLine{        error, \&description); \textcolor{comment}{// method to get the error description from NVIDIA}}
\DoxyCodeLine{    std::string exception = name;}
\DoxyCodeLine{    exception = exception + \textcolor{stringliteral}{"\(\backslash\)n-\/>occoured in file <"} + file + \textcolor{stringliteral}{" in line "} +}
\DoxyCodeLine{                std::to\_string(line) + \textcolor{stringliteral}{"\(\backslash\)n"} + \textcolor{stringliteral}{"  -\/>"} + description +}
\DoxyCodeLine{                \textcolor{stringliteral}{"\(\backslash\)n"}}
\DoxyCodeLine{                \textcolor{stringliteral}{"  -\/>"} +}
\DoxyCodeLine{                detail::whichError(error).c\_str() + \textcolor{stringliteral}{"\(\backslash\)n\(\backslash\)n"};}
\DoxyCodeLine{    \textcolor{comment}{// choose which error to throw}}
\DoxyCodeLine{    \textcolor{keywordflow}{throw} CUresultException(error, exception);}
\DoxyCodeLine{  \}}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{\} \textcolor{comment}{// namespace yacx}}
\end{DoxyCodeInclude}
 