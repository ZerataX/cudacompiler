\hypertarget{index_intro}{}\doxysection{Introduction}\label{index_intro}
\hypertarget{index_example}{}\doxysection{Example}\label{index_example}
The following example shows a general use case for the C++ bindings


\begin{DoxyCodeInclude}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#include "\mbox{\hyperlink{main_8hpp}{yacx/main.hpp}}"}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <algorithm>}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <experimental/iterator>}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{using} \mbox{\hyperlink{classyacx_1_1_source}{yacx::Source}}, \mbox{\hyperlink{classyacx_1_1_kernel_arg}{yacx::KernelArg}}, \mbox{\hyperlink{classyacx_1_1_options}{yacx::Options}}, \mbox{\hyperlink{classyacx_1_1_device}{yacx::Device}}, yacx::type\_of,}
\DoxyCodeLine{    \mbox{\hyperlink{classyacx_1_1_devices}{yacx::Devices}};}
\DoxyCodeLine{\textcolor{keywordtype}{int} main(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} \textcolor{keyword}{const} *\textcolor{keyword}{const} *\textcolor{keyword}{const} argv) \{}
\DoxyCodeLine{  yacx::handle\_logging\_args(argc, argv);}
\DoxyCodeLine{  \textcolor{keyword}{const} \textcolor{keywordtype}{int} data\{1\};}
\DoxyCodeLine{  \textcolor{keyword}{const} \textcolor{keywordtype}{int} times\{4\};}
\DoxyCodeLine{  \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} size\{32\};}
\DoxyCodeLine{}
\DoxyCodeLine{  static\_assert(!(size \% times));}
\DoxyCodeLine{}
\DoxyCodeLine{  std::vector<int> v;}
\DoxyCodeLine{  v.resize(size);}
\DoxyCodeLine{  std::fill(v.begin(), v.end(), 0);}
\DoxyCodeLine{}
\DoxyCodeLine{  \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{    Device device = Devices::findDevice();}
\DoxyCodeLine{    Options options\{\mbox{\hyperlink{classyacx_1_1options_1_1_gpu_architecture}{yacx::options::GpuArchitecture}}(device),}
\DoxyCodeLine{                    \mbox{\hyperlink{classyacx_1_1options_1_1_f_m_a_d}{yacx::options::FMAD}}(\textcolor{keyword}{false})\};}
\DoxyCodeLine{    options.insert(\textcolor{stringliteral}{"-\/-\/std"}, \textcolor{stringliteral}{"c++14"});}
\DoxyCodeLine{    Source source\{\textcolor{stringliteral}{"template<typename type, int size>\(\backslash\)n"}}
\DoxyCodeLine{                  \textcolor{stringliteral}{"\_\_global\_\_ void my\_kernel(type* c, type val) \{\(\backslash\)n"}}
\DoxyCodeLine{                  \textcolor{stringliteral}{"    auto idx\{blockIdx.x * blockDim.x + threadIdx.x\};\(\backslash\)n"}}
\DoxyCodeLine{                  \textcolor{stringliteral}{"\(\backslash\)n"}}
\DoxyCodeLine{                  \textcolor{stringliteral}{"    \#pragma unroll(size)\(\backslash\)n"}}
\DoxyCodeLine{                  \textcolor{stringliteral}{"    for (auto i\{0\}; i < size; ++i) \{\(\backslash\)n"}}
\DoxyCodeLine{                  \textcolor{stringliteral}{"        c[i] = idx + val;\(\backslash\)n"}}
\DoxyCodeLine{                  \textcolor{stringliteral}{"    \}\(\backslash\)n"}}
\DoxyCodeLine{                  \textcolor{stringliteral}{"\}"}\};}
\DoxyCodeLine{}
\DoxyCodeLine{    std::vector<KernelArg> args;}
\DoxyCodeLine{    args.emplace\_back(KernelArg\{v.data(), \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int}) * v.size(), \textcolor{keyword}{true}\});}
\DoxyCodeLine{    args.emplace\_back(KernelArg\{\textcolor{keyword}{const\_cast<}\textcolor{keywordtype}{int} *\textcolor{keyword}{>}(\&data)\});}
\DoxyCodeLine{}
\DoxyCodeLine{    dim3 grid(v.size() / times);}
\DoxyCodeLine{    dim3 block(1);}
\DoxyCodeLine{    source.program(\textcolor{stringliteral}{"my\_kernel"})}
\DoxyCodeLine{        .instantiate(type\_of(data), times)}
\DoxyCodeLine{        .compile(options)}
\DoxyCodeLine{        .configure(grid, block)}
\DoxyCodeLine{        .launch(args, device);}
\DoxyCodeLine{  \} \textcolor{keywordflow}{catch} (\textcolor{keyword}{const} std::exception \&e) \{}
\DoxyCodeLine{    std::cerr << e.what() << std::endl;}
\DoxyCodeLine{    exit(1);}
\DoxyCodeLine{  \}}
\DoxyCodeLine{}
\DoxyCodeLine{  std::cout << \textcolor{charliteral}{'\(\backslash\)n'};}
\DoxyCodeLine{  std::copy(v.begin(), v.end(),}
\DoxyCodeLine{            std::experimental::make\_ostream\_joiner(std::cout, \textcolor{stringliteral}{", "}));}
\DoxyCodeLine{  std::cout << std::endl;}
\DoxyCodeLine{}
\DoxyCodeLine{  \textcolor{comment}{// 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 6, 6, 6, 6, 7,}}
\DoxyCodeLine{  \textcolor{comment}{// 7, 7, 7, 8, 8, 8, 8}}
\DoxyCodeLine{}
\DoxyCodeLine{  \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\}}
\end{DoxyCodeInclude}
 